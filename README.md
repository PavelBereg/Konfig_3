# Учебный конфигурационный язык

Инструмент командной строки для работы с учебным конфигурационным языком. Предназначен для преобразования текста из входного формата (JSON с расширениями) в выходной формат на учебном конфигурационном языке.

## Описание

Инструмент принимает входные данные в формате JSON из стандартного ввода, преобразует их в соответствии с синтаксисом учебного конфигурационного языка и записывает результат в указанный файл. Поддерживается определение и вычисление констант на этапе трансляции. При возникновении синтаксических ошибок выводятся соответствующие сообщения.

## Синтаксис учебного конфигурационного языка

### Словари

Словари являются основной структурой данных и имеют следующий синтаксис:

$[
 ИМЯ : ЗНАЧЕНИЕ,
 ИМЯ : ЗНАЧЕНИЕ,
 ...
]


### Имена

Имена должны состоять только из заглавных букв латинского алфавита:

[A-Z]+


### Значения

Значениями могут быть:

- Числа (целые или с плавающей точкой)
- Вложенные словари

### Объявление констант

Константы объявляются на этапе трансляции с помощью следующего синтаксиса:

(define ИМЯ ЗНАЧЕНИЕ)


Имена констант должны соответствовать тем же правилам, что и обычные имена.

### Вычисление констант

Для вычисления значения константы или выражения с использованием констант используется следующий синтаксис:

!{ИМЯ}


Результатом вычисления константного выражения является значение, которое может использоваться в дальнейшем как часть других выражений или значений.

## Установка

Требуется Python 3.6 или выше.

1. Склонировать репозиторий или скачать исходный код:

      git clone https://github.com/username/repository.git
   

2. Перейти в директорию с инструментом:

      cd repository
   

3. При необходимости установить зависимости (в данном случае дополнительных пакетов не требуется).

## Использование

Инструмент запускается из командной строки и принимает один обязательный аргумент -o или --output для указания пути к выходному файлу.

python convert_config.py -o path/to/output_file < path/to/input_file


- convert_config.py — скрипт инструмента.
- path/to/output_file — путь к выходному файлу, куда будет записан результат.
- path/to/input_file — путь к входному файлу, содержащему исходный JSON.

### Пример запуска

python convert_config.py -o config_output.txt < input.json


## Примеры

Ниже приводятся три примера описания конфигураций из разных предметных областей.

### Пример 1: Математические вычисления

Входной файл (math_config.json):

(define PI 3.1416)
(define RADIUS 5)
{
  "AREA": "!{PI} * !{RADIUS} * !{RADIUS}",
  "CIRCUMFERENCE": "2 * !{PI} * !{RADIUS}"
}


Команда для запуска:

python convert_config.py -o math_output.txt < math_config.json


Выходной файл (math_output.txt):

$[
 AREA : 78.53999999999999,
 CIRCUMFERENCE : 31.415999999999997
]


### Пример 2: Конфигурация сетевого устройства

Входной файл (network_config.json):

(define MAX_CONNECTIONS 100)
(define TIMEOUT 30)
{
  "SETTINGS": {
    "MAX_CONN": "!{MAX_CONNECTIONS}",
    "TIMEOUT": "!{TIMEOUT}"
  },
  "STATUS": "Active"
}


Команда для запуска:

python convert_config.py -o network_output.txt < network_config.json


Выходной файл (network_output.txt):

$[
 SETTINGS : $[
  MAX_CONN : 100,
  TIMEOUT : 30
 ],
 STATUS : "Active"
]


### Пример 3: Настройки приложения

Входной файл (app_config.json):

(define VERSION 1.2)
(define ENABLE_FEATURE true)
{
  "APPLICATION": {
    "VERSION": "!{VERSION}",
    "FEATURES": {
      "NEW_FEATURE": "!{ENABLE_FEATURE}"
    }
  },
  "ENVIRONMENT": "Production"
}


Команда для запуска:

python convert_config.py -o app_output.txt < app_config.json


Выходной файл (app_output.txt):

$[
 APPLICATION : $[
  VERSION : 1.2,
  FEATURES : $[
   NEW_FEATURE : "true"
  ]
 ],
 ENVIRONMENT : "Production"
]


## Тестирование
Все конструкции учебного конфигурационного языка, включая возможную вложенность словарей, определение и вычисление констант, покрыты тестами. Тесты проверяют корректность преобразования входных данных в выходной формат, а также обработку ошибок при некорректном вводе.

Для запуска тестов используется модуль unittest. Тесты находятся в файле test_convert_config.py и запускаются командой:

python -m unittest test_convert_config.py


## Обработка ошибок

Инструмент осуществляет проверку входных данных и выводит информативные сообщения об ошибках в следующих случаях:

- Синтаксические ошибки JSON: Некорректный формат входного JSON или нарушение синтаксиса.
- Некорректные имена: Имена, не соответствующие шаблону [A-Z]+, приводят к ошибке.
- Неопределенные константы: Использование несуществующей константы вызывает ошибку.
- Ошибки вычислений: Некорректные арифметические выражения или операции деления на ноль обрабатываются и сообщаются.

Пример сообщения об ошибке:

Error processing input: Invalid name 'InvalidName'. Names must consist of uppercase letters A-Z.

## Лицензия

Данный инструмент распространяется под лицензией MIT. Подробности см. в файле LICENSE.

# Краткое содержание

- Описание: Инструмент для преобразования JSON в учебный конфигурационный язык.
- Синтаксис: Поддержка словарей, имен, чисел, констант.
- Использование: Командная строка, принимает вход из стандартного ввода, выводит в указанный файл.
- Примеры: Представлены конфигурации из математики, сетевых настроек и приложений.
- Тестирование: Все конструкции покрыты тестами.
- Обработка ошибок: Реализована проверка и сообщения об ошибках.
- Лицензия: MIT.

# Информация о версии

- Версия: 1.0.0
- Дата выпуска: 2023-01-01

# Системные требования

- Python 3.6 или выше

# Зависимости

- Стандартная библиотека Python

# Источники

- Документация по модулю `ast`
- Руководство по написанию инструментов командной строки
